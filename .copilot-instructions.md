# Copilot Instructions - Proyecto WorldSkills 2025

## ðŸ“ Nueva UbicaciÃ³n de DocumentaciÃ³n

**IMPORTANTE:** Toda la documentaciÃ³n ha sido reorganizada en la carpeta `docs/`

### ðŸ“š DocumentaciÃ³n Principal:

- **Requerimientos:** [`docs/requirements.md`](docs/requirements.md)
- **Plan de Entrenamiento:** [`docs/training-plan.md`](docs/training-plan.md)
- **GuÃ­a de Setup:** [`docs/setup-guide.md`](docs/setup-guide.md)

### ðŸŽ¯ Materiales por DÃ­a:

- **DÃ­a 1:** [`docs/training/day-01/`](docs/training/day-01/)
- **DÃ­a 2:** [`docs/training/day-02/`](docs/training/day-02/)
- **DÃ­a 3:** [`docs/training/day-03/`](docs/training/day-03/)
- **DÃ­a 4:** [`docs/training/day-04/`](docs/training/day-04/)
- **DÃ­a 5:** [`docs/training/day-05/`](docs/training/day-05/)

### ðŸ’¡ Ejemplos y Referencias:

- **Laravel:** [`docs/examples/laravel/`](docs/examples/laravel/)
- **React:** [`docs/examples/react/`](docs/examples/react/)
- **Postman:** [`docs/examples/postman/`](docs/examples/postman/)

---

## Contexto del Proyecto

Este es un proyecto de entrenamiento para **WorldSkills 2025 - Habilidad 17 TecnologÃ­as Web**. El objetivo es preparar competidores para desarrollar una **API REST completa** para la gestiÃ³n de un torneo de fÃºtbol femenino suramericano en **4 horas**.

**SIEMPRE** generar documentaciÃ³n amplia y detallada (paso a paso) para llevar el proyecto de ZERO a HERO.

### Stack TecnolÃ³gico Obligatorio

- **Backend:** PHP/Laravel 10+ con SQLite
- **Frontend:** React 18+ con Vite y pnpm (gestor de paquetes)
- **Build Tool:** Vite (desarrollo rÃ¡pido y hot reload)
- **Package Manager:** pnpm (rÃ¡pido y eficiente en espacio)
- **Estilos:** CSS nativo o Tailwind CSS
- **Testing:** Postman para APIs

## Prioridades de Desarrollo

### CRÃTICO (Debe completarse en las primeras 3 horas)

1. **RF001-RF005:** CRUDs bÃ¡sicos (paÃ­ses, equipos, jugadoras, partidos, resultados)
2. **RF006:** Tabla de posiciones con cÃ¡lculos automÃ¡ticos
3. **Frontend funcional:** Interfaces bÃ¡sicas para operaciones principales

### OPCIONAL (Solo si queda tiempo)

- RF007-RF010: Funcionalidades avanzadas
- Mejoras de UI/UX
- Optimizaciones de rendimiento

## Reglas de CÃ³digo EspecÃ­ficas

### Backend Laravel

```php
// Estructura de controladores - usar Resource Controllers
class TeamController extends Controller
{
    public function index() { /* GET /api/teams */ }
    public function store(Request $request) { /* POST /api/teams */ }
    public function show($id) { /* GET /api/teams/{id} */ }
    public function update(Request $request, $id) { /* PUT /api/teams/{id} */ }
    public function destroy($id) { /* DELETE /api/teams/{id} */ }
}

// Usar API Resources para respuestas consistentes
return new TeamResource($team);

// Validaciones siempre con Form Requests
public function store(StoreTeamRequest $request)
```

### Modelos y Relaciones Obligatorias

```php
// Country model
public function team() { return $this->hasOne(Team::class); }

// Team model
public function country() { return $this->belongsTo(Country::class); }
public function players() { return $this->hasMany(Player::class); }
public function homeMatches() { return $this->hasMany(Match::class, 'home_team_id'); }
public function awayMatches() { return $this->hasMany(Match::class, 'away_team_id'); }

// Player model
public function team() { return $this->belongsTo(Team::class); }

// Match model
public function homeTeam() { return $this->belongsTo(Team::class, 'home_team_id'); }
public function awayTeam() { return $this->belongsTo(Team::class, 'away_team_id'); }
```

### Validaciones del Dominio Deportivo

```php
// Validaciones crÃ­ticas que SIEMPRE deben implementarse
'iso_code' => 'required|string|size:3|unique:countries',
'jersey_number' => 'required|integer|min:1|max:99|unique:players,jersey_number,NULL,id,team_id,' . $request->team_id,
'position' => 'required|in:Portera,Defensora,Mediocampista,Delantera',
'home_team_id' => 'required|exists:teams,id|different:away_team_id',
'phase' => 'required|in:Fase de Grupos,Cuartos,Semifinal,Tercer Puesto,Final',
'status' => 'required|in:Programado,En Curso,Finalizado,Suspendido'
```

### Frontend React

```jsx
// Usar hooks personalizados para APIs
const useApi = (url) => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    // fetch logic
  }, [url]);

  return { data, loading, error };
};

// Componentes reutilizables obligatorios
const DataTable = ({ data, columns, onEdit, onDelete }) => {
  /* ... */
};
const FormModal = ({ isOpen, onClose, onSubmit, fields }) => {
  /* ... */
};
const LoadingSpinner = () => {
  /* ... */
};
```

### ConfiguraciÃ³n Vite EspecÃ­fica

```js
// vite.config.js - ConfiguraciÃ³n optimizada para desarrollo
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
        secure: false,
      },
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
});
```

```js
// main.jsx - Punto de entrada de la aplicaciÃ³n
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App.jsx';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

### Scripts pnpm recomendados

```json
// package.json - Scripts adicionales Ãºtiles
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint src --ext js,jsx --report-unused-disable-directives --max-warnings 0"
  }
}
```

## Estructura de Proyecto Requerida

### Backend Laravel

```
app/
â”œâ”€â”€ Http/
â”‚   â”œâ”€â”€ Controllers/
â”‚   â”‚   â”œâ”€â”€ CountryController.php
â”‚   â”‚   â”œâ”€â”€ TeamController.php
â”‚   â”‚   â”œâ”€â”€ PlayerController.php
â”‚   â”‚   â”œâ”€â”€ MatchController.php
â”‚   â”‚   â””â”€â”€ StandingController.php
â”‚   â”œâ”€â”€ Requests/
â”‚   â”‚   â”œâ”€â”€ StoreCountryRequest.php
â”‚   â”‚   â”œâ”€â”€ StoreTeamRequest.php
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Resources/
â”‚       â”œâ”€â”€ CountryResource.php
â”‚       â”œâ”€â”€ TeamResource.php
â”‚       â””â”€â”€ ...
â”œâ”€â”€ Models/
â”‚   â”œâ”€â”€ Country.php
â”‚   â”œâ”€â”€ Team.php
â”‚   â”œâ”€â”€ Player.php
â”‚   â””â”€â”€ Match.php
database/
â”œâ”€â”€ migrations/
â””â”€â”€ seeders/
```

### Frontend React + Vite

```
ws-torneo-frontend/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”‚   â”œâ”€â”€ DataTable.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FormModal.jsx
â”‚   â”‚   â”‚   â””â”€â”€ LoadingSpinner.jsx
â”‚   â”‚   â”œâ”€â”€ countries/
â”‚   â”‚   â”œâ”€â”€ teams/
â”‚   â”‚   â”œâ”€â”€ players/
â”‚   â”‚   â””â”€â”€ matches/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useApi.js
â”‚   â”‚   â””â”€â”€ useTeams.js
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ api.js
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Countries.jsx
â”‚   â”‚   â”œâ”€â”€ Teams.jsx
â”‚   â”‚   â””â”€â”€ Standings.jsx
â”‚   â”œâ”€â”€ App.jsx
â”‚   â”œâ”€â”€ main.jsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ index.html
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ package.json
â””â”€â”€ pnpm-lock.yaml
```

## Restricciones de Tiempo

### DistribuciÃ³n temporal obligatoria:

- **Minuto 0-60:** Setup del proyecto, migraciones, modelos, seeders
- **Minuto 60-120:** APIs de paÃ­ses, equipos y jugadoras (RF001-RF003)
- **Minuto 120-180:** APIs de partidos y resultados (RF004-RF005)
- **Minuto 180-240:** Frontend bÃ¡sico y tabla de posiciones (RF006)

### Red flags (indicadores de que vas lento):

- MÃ¡s de 15 minutos en configuraciÃ³n inicial
- MÃ¡s de 30 minutos por CRUD bÃ¡sico
- MÃ¡s de 45 minutos en tabla de posiciones
- Comenzar frontend despuÃ©s del minuto 180

## Datos de Prueba Obligatorios

### PaÃ­ses (mÃ­nimo 8):

```php
// Seeder debe incluir estos paÃ­ses exactos
['ARG', 'Argentina', 'CONMEBOL'],
['BRA', 'Brasil', 'CONMEBOL'],
['CHI', 'Chile', 'CONMEBOL'],
['COL', 'Colombia', 'CONMEBOL'],
['ECU', 'Ecuador', 'CONMEBOL'],
['PAR', 'Paraguay', 'CONMEBOL'],
['PER', 'PerÃº', 'CONMEBOL'],
['URU', 'Uruguay', 'CONMEBOL']
```

### Partidos de prueba:

- MÃ­nimo 8 partidos en diferentes fases
- Al menos 4 partidos finalizados con resultados
- Datos suficientes para generar tabla de posiciones realista

## Endpoints API Obligatorios

### BÃ¡sicos (implementar primero):

```
GET|POST /api/countries
GET|PUT|DELETE /api/countries/{id}
GET|POST /api/teams
GET|PUT|DELETE /api/teams/{id}
GET|POST /api/players
GET|PUT|DELETE /api/players/{id}
GET|POST /api/matches
GET|PUT|DELETE /api/matches/{id}
POST|PUT /api/matches/{id}/result
GET /api/standings
```

### Avanzados (si queda tiempo):

```
GET /api/teams/{id}/players
GET /api/matches/team/{team_id}
GET /api/matches/date/{date}
GET /api/matches/phase/{phase}
GET /api/statistics/general
```

## Criterios de Ã‰xito

### MÃ­nimo viable (para aprobar):

- âœ… Todos los CRUDs bÃ¡sicos funcionando (RF001-RF005)
- âœ… Base de datos con relaciones correctas
- âœ… Al menos 20 endpoints API respondiendo
- âœ… Frontend bÃ¡sico para 3 entidades principales
- âœ… Tabla de posiciones calculando correctamente

### Excelencia (para destacar):

- âœ… Todo lo anterior + RF006-RF007
- âœ… Frontend completo con todas las funcionalidades
- âœ… Validaciones robustas y manejo de errores
- âœ… CÃ³digo limpio y bien estructurado
- âœ… Interface atractiva y responsive

## Comandos de Setup RÃ¡pido

### Backend:

```bash
composer create-project laravel/laravel ws-torneo-api
cd ws-torneo-api
php artisan make:model Country -mcr
php artisan make:model Team -mcr
php artisan make:model Player -mcr
php artisan make:model Match -mcr
php artisan migrate:fresh --seed
php artisan serve
```

### Frontend:

```bash
# Instalar pnpm globalmente si no estÃ¡ instalado
npm install -g pnpm

# Crear proyecto React con Vite
pnpm create vite ws-torneo-frontend --template react
cd ws-torneo-frontend

# Instalar dependencias
pnpm install

# Instalar dependencias adicionales necesarias
pnpm add axios react-router-dom

# Opcional: Instalar Tailwind CSS para estilos
pnpm add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Iniciar servidor de desarrollo (con hot reload)
pnpm dev
```

### Ventajas de Vite + pnpm en Competencia

**Â¿Por quÃ© Vite?**

- âš¡ **Start-up ultrarrÃ¡pido:** Servidor de desarrollo listo en < 3 segundos
- ðŸ”¥ **Hot Module Replacement:** Cambios instantÃ¡neos sin reload completo
- ðŸ“¦ **Bundle optimizado:** Build de producciÃ³n mÃ¡s pequeÃ±o y rÃ¡pido
- ðŸ› ï¸ **Zero-config:** ConfiguraciÃ³n mÃ­nima, funciona out-of-the-box

**Â¿Por quÃ© pnpm?**

- ðŸš€ **InstalaciÃ³n 3x mÃ¡s rÃ¡pida** que npm
- ðŸ’¾ **Ahorra espacio en disco** mediante enlaces simbÃ³licos
- ðŸ”’ **DeterminÃ­stico:** Lock file mÃ¡s confiable
- âš™ï¸ **Compatible** con todos los paquetes de npm

**Tiempo ahorrado en competencia:**

- Setup inicial: **2-3 minutos menos** vs create-react-app
- InstalaciÃ³n de dependencias: **30-60 segundos menos**
- Desarrollo: **Hot reload instantÃ¡neo** = menos interrupciones
- Build final: **50% mÃ¡s rÃ¡pido** para demo

## Notas Importantes

- **NO** usar autenticaciÃ³n/autorizaciÃ³n (consume tiempo innecesario)
- **NO** implementar funcionalidades no requeridas
- **SÃ** priorizar funcionalidad sobre diseÃ±o visual
- **SÃ** usar convenciones Laravel estÃ¡ndar
- **SÃ** mantener cÃ³digo simple y directo
- **SÃ** testear cada endpoint al crearlo

### Troubleshooting Vite + pnpm

**Problemas comunes y soluciones rÃ¡pidas:**

```bash
# Si pnpm no estÃ¡ instalado globalmente
npm install -g pnpm

# Limpiar cachÃ© si hay problemas de dependencias
pnpm store prune

# Reinstalar dependencias completamente
rm -rf node_modules pnpm-lock.yaml
pnpm install

# Verificar que el proxy funcione (CORS)
# En vite.config.js, asegurar configuraciÃ³n de proxy correcta

# Si el puerto 3000 estÃ¡ ocupado
pnpm dev --port 3001
```

---

**Recuerda:** Este es un ejercicio de velocidad y precisiÃ³n. La clave estÃ¡ en implementar exactamente lo requerido, en el orden correcto, sin desviarse hacia funcionalidades "nice to have".
